<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>
        Recipe Details Module
    </title>
    <base href="">
    <!-- base cannot diverge from parent -->
    <!--base href="/"-->
    <link rel="stylesheet" href="//fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/materialize/0.97.8/css/materialize.min.css">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js" type="text/javascript"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/materialize/0.97.8/js/materialize.min.js" type="text/javascript"></script>
</head>

<body>
    <plugin>Loading Plugin...</plugin>
</body>
<% if (htmlWebpackPlugin.options.metadata.isDevServer) { %>
    <script>
        acap = {
            ADMIN_TAPPADS: {
                contUnitsMgr: {
                    getInfo: function () {
                        return {
                            ad_unit_id: 7,
                            ad_unit_name: 'Testr'
                        };
                    }
                }
            }
        };
    </script>
<% } else { %>
    <script>
    (function(parent) {
        if (!"MutationObserver" in window) return;
        try {
            var details = parent.acap.ADMIN_TAPPADS.contUnitsMgr.details;
            var lastHgt;
            if (details) {
                details.onMuts = function(mutation) {
                    var hgt = document.body.clientHeight;
                    if (hgt < 900 || lastHgt == hgt) return; // matches parent container min-height;
                    details.setIframeWrapperHgt(hgt + 20);
                    lastHgt = hgt;
                };

                var observer = new MutationObserver(function(mutations) {
                    mutations.forEach(details.onMuts);
                });

                observer.observe(document.body, {
                    childList: true,
                    subTree: true
                });
            }
        } catch (except) {
            console.log(except.message);
        }
    })(window.parent);
</script>
<% } %>

</html>